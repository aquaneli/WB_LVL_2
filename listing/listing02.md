Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и порядок их вызовов.

```go
package main
 
import (
    "fmt"
)
 
func test() (x =int) {
    defer func() {
        x++
    }()
    x = 1
    return
}
 
 
func anotherTest() int {
    var x int
    defer func() {
        x++
    }()
    x = 1
    return x
}

func main() {
    fmt.Println(test())
    fmt.Println(anotherTest())
}


```

Ответ:
```
Программа выведет числа 2 и 1. В первом случаем вызовется функция test(), которая вернет возвращаемую именованную переменную x. По дефолту x имеет значение 0. Когда функция начнет выполнение defer отложит выполнение анонимной функции и сначала переменной x присвоится значение 1, а только потом будет инкрементироваться.

Во втором случае вызовется anotherTest(), внутри которой будет объявлена переменная x, по дефолту она будет иметь значение 0. Далее defer отложит выполнение анонимной функции. Отложенная анонимная функция будет выполняться после return, сначала будет подготовлено возвращаемое значение,а  только потом будем инкрементировать, но от этой инкрементации перменная уже не поменяет значение и останется 1.

Defer добавляет вызов новой функции в специальный стек, который обрабатывается в порядке LIFO и после этого продолжает выполнение текущей функции.
На практике defer часто применяется при взаимодействии с файлами и сетевыми соединениями, чтобы гарантировать их корректное закрытие и освобождение ресурсов, что позволяет избежать утечек памяти. Также он используется для досрочного завершения программы в случае ошибки.
```
